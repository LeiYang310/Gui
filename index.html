<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>系统缓冲递进与私密干预版</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding-top: 30px; }
        input, button { padding: 8px 12px; margin: 5px; }
        #publicStatus, #privateStatus { margin-top: 20px; padding: 10px; border: 1px solid #ccc; width: 350px; margin-left: auto; margin-right: auto; }
    </style>
</head>
<body>

<h2>系统缓冲递进 + 观察窗口 + 设计者私密干预</h2>

<div id="publicStatus"></div>
<hr>
<div id="privateStatus"></div>

<br>
<button onclick="manualOverride('意志强度', 45)">提升意志强度</button>
<button onclick="manualOverride('内在意图', 50)">强化内在意图</button>

<script>

// 公开缓冲参数
const publicAdjustmentPlan = {
    "社会资源": { target: 40, current: 25, dailyChange: 2 },
    "环境安全感": { target: 45, current: 30, dailyChange: 3 },
    "物质环境影响": { target: 35, current: 20, dailyChange: 1.5 }
};

// 设计者私密即时干预参数
const privateImmediateParams = {
    "意志强度": 30,
    "内在意图": 35
};

// 缓冲递进逻辑
function processPublicAdjustment() {
    for (const key in publicAdjustmentPlan) {
        const param = publicAdjustmentPlan[key];
        if (param.current < param.target) {
            param.current = Math.min(param.current + param.dailyChange, param.target);
        }
    }
}

// 页面状态更新
function updateDisplay() {
    const publicSection = document.getElementById("publicStatus");
    publicSection.innerHTML = "<h3>外部可观察指标</h3>";

    for (const key in publicAdjustmentPlan) {
        const param = publicAdjustmentPlan[key];
        const daysLeft = param.dailyChange > 0 ? Math.ceil((param.target - param.current) / param.dailyChange) : "已达成";
        publicSection.innerHTML += `<p>${key}：当前 ${param.current} → 目标 ${param.target}，预计 ${daysLeft} 天达成</p>`;
    }

    const privateSection = document.getElementById("privateStatus");
    privateSection.innerHTML = `
        <h3>设计者私密控制区</h3>
        <p>意志强度：系统已即时调整，外部不提供追踪</p>
        <p>内在意图：系统已即时调整，外部不提供追踪</p>
    `;
}

// 设计者私密干预
function manualOverride(param, value) {
    if (privateImmediateParams.hasOwnProperty(param)) {
        privateImmediateParams[param] = value;
        alert(`设计者已将【${param}】即时调整为 ${value}`);
    }
}

// 初始化
updateDisplay();
setInterval(() => {
    processPublicAdjustment();
    updateDisplay();
}, 3000); // 3秒模拟1天

</script>

</body>
</html>
